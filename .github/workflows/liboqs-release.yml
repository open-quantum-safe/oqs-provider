name: Release tests

on:
  workflow_dispatch:
    inputs:
      liboqs_ref:
        description: 'liboqs branch or tag'
        required: true
        default: 'main'
        type: string
      provider_ref:
        description: 'oqs-provider branch or tag'
        required: true
        default: 'main'
        type: string

# This workflow can be triggered from either the GitHub Actions web UI or a shell.
# To use a shell, generate a GitHub personal access token and run the following command:
#
# curl --request POST \
#      --header "Accept: application/vnd.github+json" \
#      --header "Authorization: Bearer YOUR_TOKEN_HERE" \
#      --header "X-GitHub-Api-Version: 2022-11-28" \
#      --data '{
#                "event_type": "liboqs-release",
#                "inputs": {
#                            "provider_ref": "PROVIDER_BRANCH_OR_TAG_HERE",
#                            "liboqs_ref": "LIBOQS_BRANCH_OR_TAG_HERE"
#                          }
#              }' \
#      https://api.github.com/repos/open-quantum-safe/oqs-provider/actions/workflows/liboqs-release.yml/dispatches

jobs:
  release-test:
    uses: ./.github/workflows/release-test.yml
    with:
      liboqs_ref: ${{ inputs.liboqs_ref }}
      provider_ref: ${{ inputs.provider_ref }}
