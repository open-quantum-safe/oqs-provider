###CREATE QUANTUM SAFE KEY PAIR

LD_LIBRARY_PATH=/home/feventura/Documents/openssl ../../bin/openssl req -x509 -new -newkey p521_dilithium5 -keyout qsc.key -out qsc.crt -nodes -subj "/CN=oqstest" -days 365 -config /home/feventura/Documents/openssl/apps/openssl.cnf -provider-path /home/feventura/Documents/oqs-provider/_build/oqsprov -provider oqsprovider -provider default

###SIGN DATA

LD_LIBRARY_PATH=/home/feventura/Documents/openssl ../../bin/openssl cms -in test.txt -sign -signer qsc.crt -inkey qsc.key -nodetach -outform pem -binary -out signedfile -md sha512 -provider-path /home/feventura/Documents/oqs-provider/_build/oqsprov  -provider default -provider oqsprovider

##VERIFY DATA

LD_LIBRARY_PATH=/home/feventura/Documents/openssl ../../bin/openssl cms -verify -CAfile qsc.crt -inform pem -in signedfile -crlfeol -out outputfile -provider-path /home/feventura/Documents/oqs-provider/_build/oqsprov -provider oqsprovider -provider default

##CREATE TEST SIGNATURE (from oqsprov/test)

gcc oqs_test_signatures.c test_common.o -L ../openssl -lcrypto -o output_signatures

##RUN TEST SIGNARURE (from oqsprov/test)

./output_signatures oqsprovider /home/feventura/Documents/oqs-provider/test/oqs.cnf 

##IMPLEMENT CHANGES TO oqs_sig.c TO PROVIDER (from oqsprov/test)

cd .. && cmake -DOPENSSL_ROOT_DIR=$(pwd)/.local -DCMAKE_PREFIX_PATH=$(pwd)/.local -S . -B _build && cmake --build _build && cd test/

##IMPLEMENT CHANGES THEN COMPILE AND RUN TEST (generic version, from oqsprov)

cmake -DOPENSSL_ROOT_DIR=$(pwd)/.local -DCMAKE_PREFIX_PATH=$(pwd)/.local -S . -B _build && cmake --build _build && gcc ./test/oqs_test_signatures.c ./test/test_common.o -L ./openssl -lcrypto -o ./test/output_signatures  &&  ./test/output_signatures oqsprovider $(pwd)/test/oqs.cnf

##IMPLEMENT CHANGES THEN BUILD DEPENDENCY LIBRARY THEN COMPILE AND RUN TEST (generic version, from oqsprov)

cmake -DOPENSSL_ROOT_DIR=$(pwd)/.local -DCMAKE_PREFIX_PATH=$(pwd)/.local -S . -B _build && cmake --build _build && gcc -Wall -c ./test/test_common.c && gcc ./test/oqs_test_signatures.c ./test/test_common.o -L ./openssl -lcrypto -o ./test/output_signatures  &&  ./test/output_signatures oqsprovider $(pwd)/test/oqs.cnf


